{"version":3,"file":"main.js","mappings":"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","sources":["/home/mighty/repos/live-validation-form/src/index.js"],"sourcesContent":["import \"./styles.css\";\n\nconst inputEmail = document.getElementById(\"email\");\nconst selectCountry = document.getElementById(\"country\");\nconst inputPostalCode = document.getElementById(\"postal-code\");\nconst inputPassword = document.getElementById(\"password\");\nconst inputPasswordConfirm = document.getElementById(\"password-confirm\");\n\nconst spanErrorEmail = document.getElementById(\"error-email\");\nconst spanErrorCountry = document.getElementById(\"error-country\");\nconst spanErrorPostal = document.getElementById(\"error-postal-code\");\nconst spanErrorPassword = document.getElementById(\"error-password\");\nconst spanErrorPasswordConfirm = document.getElementById(\n  \"error-confirm-password\",\n);\nconst spanSuccess = document.getElementById(\"success\");\n\nconst form = document.getElementById(\"form\");\n\nconst regexPostal = {\n  germany: /^\\d{5}$/,\n  france: /^\\d{5}$/,\n  us: /^\\d{5}(?:-\\d{4})?$/,\n  canada: /^[A-Z]\\d[A-Z] \\d[A-Z]\\d$/,\n  uk: /^[A-Z]{1,2}\\d[A-Z\\d]?\\s?\\d[A-Z]{2}$/,\n  netherlands: /^\\d{4} ?[A-Z]{2}$/,\n  sweden: /^S?-?\\d{3} ?\\d{2}$/,\n};\n\nconst specialSign = /[-!+@#$%^&*]/;\nconst number = /\\d/;\nconst letter = /[a-zA-Z]/;\n\nconst passwordChecks = {\n  hasLetter: false,\n  hasNumber: false,\n  hasSign: false,\n  passwordsMatch: false,\n};\n\nconst messages = {\n  email: {\n    empty: \"Email is required.\",\n    invalid: \"Enter a valid email.\",\n  },\n  country: {\n    invalid: \"Country is required.\",\n  },\n  postal: {\n    country: \"Select a country first.\",\n    empty: \"Postal code is required.\",\n    invalid: \"Enter a valid postal code.\",\n  },\n  password: {\n    valueMissing: \"Password is required.\",\n    tooShort: \"Password must be at least 8 characters.\",\n    invalid: \"Enter a valid password.\",\n    letterNumSign: \"Use letter, number and special character.\",\n    numSign: \"Use number an special character.\",\n    letterSign: \"Use letter an special character.\",\n    letterNum: \"Use letter and number.\",\n    letter: \"Letter is required.\",\n    number: \"Number is required.\",\n    sign: \"Special character is required.\",\n  },\n  passwordConfirm: {\n    nomatch: \"Passwords don't match.\",\n    invalid: \"Enter a valid password.\",\n  },\n  success: {\n    submit: \"High Five!\",\n  },\n};\n\ndocument.querySelectorAll(\"input\").forEach((input) => {\n  input.addEventListener(\"input\", () => {\n    validateInput(input);\n  });\n  input.addEventListener(\"blur\", () => {\n    validateInput(input);\n  });\n});\n\nselectCountry.addEventListener(\"input\", () => {\n  inputPostalCode.value = \"\"; // clear postal code input if country value changes\n  validateInput(selectCountry);\n});\n\nselectCountry.addEventListener(\"blur\", () => {\n  validateInput(selectCountry);\n});\n\nform.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n  validateForm(form);\n});\n\nconst validateInput = (input) => {\n  if (input.id === \"email\") {\n    if (!input.validity.valid) {\n      if (input.value.length === 0) {\n        spanErrorEmail.textContent = messages.email.empty;\n      } else {\n        spanErrorEmail.textContent = messages.email.invalid;\n      }\n      input.classList.add(\"input-error\");\n      input.classList.remove(\"input-success\");\n      spanErrorEmail.classList.add(\"show\");\n      input.setAttribute(\"aria-invalid\", \"true\");\n      console.log(\n        document.getElementById(\"email\").getAttribute(\"aria-invalid\"),\n      );\n    } else {\n      input.classList.add(\"input-success\");\n      input.classList.remove(\"input-error\");\n      spanErrorEmail.textContent = \"\";\n      spanErrorEmail.classList.remove(\"show\");\n      input.setAttribute(\"aria-invalid\", \"false\");\n      console.log(\n        document.getElementById(\"email\").getAttribute(\"aria-invalid\"),\n      );\n    }\n    return;\n  }\n\n  if (input.id === \"country\") {\n    if (!input.validity.valid) {\n      spanErrorCountry.textContent = messages.country.invalid;\n      spanErrorCountry.classList.add(\"show\");\n      selectCountry.classList.add(\"input-error\");\n      selectCountry.classList.remove(\"input-success\");\n      input.setAttribute(\"aria-invalid\", \"true\");\n      console.log(\n        document.getElementById(\"country\").getAttribute(\"aria-invalid\"),\n      );\n    } else {\n      spanErrorCountry.textContent = \"\";\n      spanErrorCountry.classList.remove(\"show\");\n      spanErrorPostal.textContent = \"\";\n      spanErrorPostal.classList.remove(\"show\");\n      selectCountry.classList.add(\"input-success\");\n      selectCountry.classList.remove(\"input-error\");\n      input.setAttribute(\"aria-invalid\", \"false\");\n      console.log(\n        document.getElementById(\"country\").getAttribute(\"aria-invalid\"),\n      );\n\n      const pattern = regexPostal[input.value];\n      if (pattern) {\n        inputPostalCode.pattern = pattern.source;\n      }\n      inputPostalCode.dispatchEvent(new Event(\"input\"));\n    }\n    return;\n  }\n\n  if (input.id === \"postal-code\") {\n    const countrySelected = selectCountry.value;\n    if (countrySelected === \"\") {\n      spanErrorPostal.textContent = messages.postal.country;\n      spanErrorPostal.classList.add(\"show\");\n      input.setAttribute(\"aria-invalid\", \"true\");\n      console.log(\n        document.getElementById(\"postal-code\").getAttribute(\"aria-invalid\"),\n      );\n      return;\n    }\n\n    if (input.value.length === 0) {\n      input.classList.add(\"input-error\");\n      input.classList.remove(\"input-success\");\n      spanErrorPostal.textContent = messages.postal.empty;\n      spanErrorPostal.classList.add(\"show\");\n      input.setAttribute(\"aria-invalid\", \"true\");\n      console.log(\n        document.getElementById(\"postal-code\").getAttribute(\"aria-invalid\"),\n      );\n      return;\n    }\n\n    const pattern = regexPostal[countrySelected];\n    if (pattern && !pattern.test(input.value)) {\n      input.classList.add(\"input-error\");\n      input.classList.remove(\"input-success\");\n      spanErrorPostal.textContent = messages.postal.invalid;\n      spanErrorPostal.classList.add(\"show\");\n      input.setAttribute(\"aria-invalid\", \"true\");\n      console.log(\n        document.getElementById(\"postal-code\").getAttribute(\"aria-invalid\"),\n      );\n    } else {\n      // input is correct\n      input.classList.add(\"input-success\");\n      input.classList.remove(\"input-error\");\n      spanErrorPostal.textContent = \"\";\n      spanErrorPostal.classList.remove(\"show\");\n      input.setAttribute(\"aria-invalid\", \"false\");\n      console.log(\n        document.getElementById(\"postal-code\").getAttribute(\"aria-invalid\"),\n      );\n    }\n    return;\n  }\n\n  if (input.id === \"password\") {\n    if (input.validity.valueMissing) {\n      input.classList.add(\"input-error\");\n      input.classList.remove(\"input-success\");\n      spanErrorPassword.textContent = messages.password.valueMissing;\n      spanErrorPassword.classList.add(\"show\");\n      input.setAttribute(\"aria-invalid\", \"true\");\n      console.log(\n        document.getElementById(\"password\").getAttribute(\"aria-invalid\"),\n      );\n    } else if (input.validity.tooShort) {\n      input.classList.add(\"input-error\");\n      input.classList.remove(\"input-success\");\n      spanErrorPassword.textContent = messages.password.tooShort;\n      spanErrorPassword.classList.add(\"show\");\n      input.setAttribute(\"aria-invalid\", \"true\");\n      console.log(\n        document.getElementById(\"password\").getAttribute(\"aria-invalid\"),\n      );\n    } else {\n      const value = input.value;\n      let hasLetter = false;\n      let hasNumber = false;\n      let hasSign = false;\n\n      if (letter.test(value)) {\n        hasLetter = true;\n      }\n      if (number.test(value)) {\n        hasNumber = true;\n      }\n      if (specialSign.test(value)) {\n        hasSign = true;\n      }\n      passwordChecks.hasLetter = hasLetter;\n      passwordChecks.hasNumber = hasNumber;\n      passwordChecks.hasSign = hasSign;\n\n      if (!hasLetter || !hasNumber || !hasSign) {\n        input.classList.add(\"input-error\");\n        input.classList.remove(\"input-success\");\n        spanErrorPassword.classList.add(\"show\");\n        input.setAttribute(\"aria-invalid\", \"true\");\n      } else {\n        input.classList.add(\"input-success\");\n        input.classList.remove(\"input-error\");\n        spanErrorPassword.classList.remove(\"show\");\n        input.setAttribute(\"aria-invalid\", \"false\");\n      }\n\n      console.log(\n        document.getElementById(\"password\").getAttribute(\"aria-invalid\"),\n      );\n\n      if (!hasLetter && !hasNumber && !hasSign) {\n        spanErrorPassword.textContent = messages.password.letterNumSign;\n      } else if (hasLetter && !hasNumber && !hasSign) {\n        spanErrorPassword.textContent = messages.password.numSign;\n      } else if (hasLetter && hasNumber && !hasSign) {\n        spanErrorPassword.textContent = messages.password.sign;\n      } else if (!hasLetter && hasNumber && !hasSign) {\n        spanErrorPassword.textContent = messages.password.letterSign;\n      } else if (!hasLetter && hasNumber && hasSign) {\n        spanErrorPassword.textContent = messages.password.letter;\n      } else if (!hasLetter && !hasNumber && hasSign) {\n        spanErrorPassword.textContent = messages.password.letterNum;\n      } else if (hasLetter && !hasNumber && hasSign) {\n        spanErrorPassword.textContent = messages.password.number;\n      } else {\n        console.log(\"success: letter | number | sign\");\n      }\n    }\n  }\n\n  if (input.id === \"password-confirm\") {\n    const firstPasswordValue = inputPassword.value;\n    if (input.value !== firstPasswordValue) {\n      input.classList.add(\"input-error\");\n      input.classList.remove(\"input-success\");\n      input.setAttribute(\"aria-invalid\", \"true\");\n      console.log(\n        document\n          .getElementById(\"password-confirm\")\n          .getAttribute(\"aria-invalid\"),\n      );\n      passwordChecks.passwordsMatch = false;\n      spanErrorPasswordConfirm.textContent = messages.passwordConfirm.nomatch;\n      spanErrorPasswordConfirm.classList.add(\"show\");\n    } else {\n      passwordChecks.passwordsMatch = true;\n      if (!input.validity.valid) {\n        input.classList.add(\"input-error\");\n        input.classList.remove(\"input-success\");\n        input.setAttribute(\"aria-invalid\", \"true\");\n        console.log(\n          document\n            .getElementById(\"password-confirm\")\n            .getAttribute(\"aria-invalid\"),\n        );\n        spanErrorPasswordConfirm.textContent = messages.passwordConfirm.invalid;\n        spanErrorPasswordConfirm.classList.add(\"show\");\n      } else {\n        input.classList.add(\"input-success\");\n        input.classList.remove(\"input-error\");\n        input.setAttribute(\"aria-invalid\", \"false\");\n        console.log(\n          document\n            .getElementById(\"password-confirm\")\n            .getAttribute(\"aria-invalid\"),\n        );\n        spanErrorPasswordConfirm.textContent = \"\";\n        spanErrorPasswordConfirm.classList.remove(\"show\");\n      }\n    }\n  }\n};\n\nconst validateForm = (form) => {\n  const inputFields = document.querySelectorAll(\"input, select\");\n  inputFields.forEach((input) => {\n    validateInput(input);\n  });\n\n  if (\n    form.checkValidity() &&\n    passwordChecks.hasLetter &&\n    passwordChecks.hasNumber &&\n    passwordChecks.hasSign &&\n    passwordChecks.passwordsMatch\n  ) {\n    spanSuccess.textContent = messages.success.submit;\n    spanSuccess.classList.add(\"show\");\n    setTimeout(() => {\n      form.submit();\n    }, 3000);\n  }\n};\n"],"names":["document","getElementById","selectCountry","inputPostalCode","inputPassword","spanErrorEmail","spanErrorCountry","spanErrorPostal","spanErrorPassword","spanErrorPasswordConfirm","spanSuccess","form","regexPostal","germany","france","us","canada","uk","netherlands","sweden","specialSign","number","letter","passwordChecks","hasLetter","hasNumber","hasSign","passwordsMatch","messages","querySelectorAll","forEach","input","addEventListener","validateInput","value","e","preventDefault","validateForm","id","countrySelected","textContent","classList","add","setAttribute","console","log","getAttribute","length","remove","pattern","test","validity","valueMissing","tooShort","firstPasswordValue","valid","source","dispatchEvent","Event","checkValidity","setTimeout","submit"],"sourceRoot":""}